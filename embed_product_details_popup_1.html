{{ backvar(main_img_maxwidth,350) }}
{{ backvar(main_img_maxheight,350) }}
{{ backvar(main_img_thumbnail_maxwidth,155) }}
{{ backvar(main_img_thumbnail_maxheight,155) }}
{{ backvar(alt_img_maxwidth,350) }}
{{ backvar(alt_img_maxheight,350) }}
{{ backvar(alt_img_thumbnail_maxwidth,155) }}
{{ backvar(alt_img_thumbnail_maxheight,155) }}

<div id='page_tooltip' class='product-tooltip h-100'>
    {{ start_script }}
    <div class='product-tooltip__inner js-product row gutters-10 h-100'>
        <div class='product-tooltip__pic-wrap col-md-6'>
            <div class="product-tooltip__pic-inner position-relative">
                <div class='product-tooltip__img-inner position-relative'>
                    <div class='product-tooltip__img-wrapper'>
                        {% if alt_images_disp %}
                            <div class="product-tooltip__img--alts js-slick--alts slick-center">
                                <figure class="product-tooltip__img-main-wrap">
                                    <img class="product-tooltip__img-main" src="{{ img_url }}"{% if img_retina_exists %} srcset="{{ img_retina_url }} {{ img_retina_size }}"{% endif %} alt="{{ img_alt }}" title="{{ img_alt }}" id="main_image" />
                                </figure>
                                {% for alt_img in alt_images %}
                                    {% if alt_img.disp %}
                                        <figure class="product-tooltip__img-wrap--alt">
                                            <img class="product-tooltip__img--alt" src="{{ alt_img.url }}"{% if alt_img.retina_exists %} srcset="{{ alt_img.retina_url }} {{ alt_img.retina_size }}"{% endif %} alt="{{ alt_img.alt }}" title="{{ alt_img.title }}" />
                                        </figure>
                                    {% endif %}
                                {% endfor %}
                            </div>

                            <div class="product-tooltip__img--thumbs-wrap slick-indent-md slick-center slick-arrow--middle slick-arrow--small slick-gap--10 mt-3">
                                <div class="product-tooltip__img--thumbs js-slick--thumbs clearfix">
                                    <div class="product-tooltip__img-wrap--thumb">
                                        <img class="product-tooltip__img-main--thumb" src="{{ img_thumbnail_url }}"{% if img_thumbnail_retina_exists %} srcset="{{ img_thumbnail_retina_url }} {{ img_thumbnail_retina_size }}"{% endif %} alt="{{ img_alt }}" title="{{ img_alt }}" />
                                    </div>
                                    {% for alt_img in alt_images %}
                                        {% if alt_img.disp %}
                                            <div class="product-tooltip__img-wrap--thumb">
                                                <img class="product-tooltip__img--thumb" src="{{ alt_img.thumbnail_url }}"{% if alt_img.thumbnail_retina_exists %} srcset="{{ alt_img.thumbnail_retina_url }} {{ alt_img.thumbnail_retina_size }}"{% endif %} alt="{{ alt_img.alt }}" title="{{ alt_img.title }}" />
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                            <script>
                                var $slickContainerAlts = '.js-slick--alts';
                                var $slickContainerThumbs = '.js-slick--thumbs';

                                $(document).ready(function() {
                                    // Main/Product image slider for product page
                                    $($slickContainerAlts).slick({
                                        slidesToShow: 1,
                                        slidesToScroll: 1,
                                        swipe: false,
                                        infinite: false,
                                        draggable: false,
                                        arrows: false,
                                        fade:true,
                                        speed: 300,
                                        lazyLoad: 'ondemand',
                                        asNavFor: $slickContainerThumbs,
                                        prevArrow: '<div class="slick-prev"><i class="fa fa-arrow-left" aria-hidden="true"></i><span class="sr-text">Previous</span></div>',
                                        nextArrow: '<div class="slick-next"><i class="fa fa-arrow-right" aria-hidden="true"></i><span class="sr-text">Next</span></div>'
                                    });
                                    // Thumbnail/alternates slider for product page
                                    $($slickContainerThumbs).slick({
                                        slidesToShow: 2,
                                        slidesToScroll: 1,
                                        infinite: false,
                                        centerPadding: '0px',
                                        asNavFor: $slickContainerAlts,
                                        speed: 300,
                                        focusOnSelect: true,
                                        touchThreshold: 100,
                                        useTransform: true,
                                        waitForAnimate: false,
                                        lazyLoad: 'progressive',
                                        mobileFirst: true,
                                        prevArrow: '<div class="slick-prev"><i class="fa fa-arrow-left" aria-hidden="true"></i><span class="sr-text">Previous</span></div>',
                                        nextArrow: '<div class="slick-next"><i class="fa fa-arrow-right" aria-hidden="true"></i><span class="sr-text">Next</span></div>',
                                    });
                                });
                            </script>
                        {% else %}
                            <figure class="product-tooltip__img-main-wrap">
                                <img class="product-tooltip__img-main" src="{{ img_url }}" alt="{{ img_alt }}" title="{{ img_alt }}" id="main_image" />
                            </figure>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class='product-tooltip__datas col-md-6'>
            <div class='product-tooltip__datas-inner'>
                <div class="row no-gutters artdet__name-rating">
                    {% if new_disp %}
                        <div class="product-tooltip__new-outer col-12 d-block mb-2">
                            <div class="product-tooltip__new badge badge--new">{{ text.status_new }}</div>
                        </div>
                    {% endif %}
                    {% if reviews_highlighted_disp %}
                        <div class="product-tooltip__rating-highlighted col-auto rating-stars font-xs" title="{{ reviews_score_avg }}">
                            <div class="rating-stars__back text-primary">
                                <div class="rating-stars__front" style="width: {{ reviews_score_percent }}%;"></div>
                            </div>
                        </div>
                        <div class="product-tooltip__rating-highlighted-numbers col-auto pl-2 text-primary font-xs">
                            <span class="product-tooltip__rating-highlighted-score-num pr-2 font-weight-bold">{{ reviews_score_avg }}</span>
                            <span class="product-tooltip__rating-highlighted-reviews-count">({{ reviews_count }} {{ text.review }})</span>
                        </div>
                    {% endif %}
                    <div class='product-tooltip__name col-12 mb-5'>
                        <h3 class="font-weight-bold text-uppercase line-clamp--2-14">{{ name }}</h3>
                    </div>
                </div>

                {{ product_form_start }}

                <div class="product-tooltip__prices row no-gutters">
                    {% if sale_disp %}
                        <div class="product-tooltip__sale-outer col-12">
                            <div class="product-tooltip__sale badge badge--sale">-<span id='price_save_{{ sku_id }}'>{{ sale_percent }}</span>%</div>
                        </div>
                    {% endif %}

                    {% if prices_disp %}
                        <div class="product-tooltip__price-base-and-sale col-12 row no-gutters align-items-baseline{% if price_sale_disp %} has-sale-price{% endif %}">
                            <div class="product-tooltip__price text-center row no-gutters align-items-baseline text-cn">
                                {% if price_sale_disp %}
                                    <div class="product-tooltip__price-discount product-price--sale col-auto pr-3 font-weight-bold">
                                        {{ price_sale }}
                                    </div>
                                {% endif %}
                                {% if price_disp %}
                                    <div class="product-tooltip__price-base col-auto product-price--base{% if not price_sale_disp %} font-weight-bold{% elseif price_line_through %} text-line-through{% endif %}">
                                        {{ price }}
                                    </div>
                                {% endif %}
                            </div>
                            {% if sale_text_disp %}
                                <div class="product-tooltip__price-discount-period col-12 line-height-12">
                                    <span class="product-tooltip__price-discount-period-start">{{ text.start }}: {{ sale_start }}</span>&nbsp;&nbsp;
                                    <span class="product-tooltip__price-discount-period-end">
                                        {% if sale_have_end %}
                                            {{ text.end }}: {{ sale_end }}
                                        {% else %}
                                            {{ text.while_stock_lasts }}
                                        {% endif %}
                                    </span>
                                </div>
                            {% endif %}

                            {% if price_unit_disp %}
                                <div class="product-tooltip__price-unit col-12">{{ text.unit_price }}: {{ price_unit }}</div>
                            {% endif %}

                            {% if point_highlighted_disp %}
                                <div class="product-tooltip__virtual-point-highlighted col-12">{{ text.points_for_purchase }}: {{ point }}</div>
                            {% endif %}

                            {% if login_needed %}
                                <button class='product-tooltip__price-login-btn btn btn-link font-s' type='button' onclick='overlay_login()'>
                                    {{ text.need_login_to_prices }}
                                </button>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>

                {% if plus_service_disp %}
                    <div id='product-tooltip__service-plus' class='plus-service my-4'>
                        <div class='plus-service__inner usn form-group mb-0'>
                            <div class='plus-service__item plus-service__item--none form-check mb-2 px-0 service_plus_radio'>
                                <input class='plus-service__radio-input form-check-input' id='service_plus_none_radio' name='service_plus' value='' type='radio' checked='checked' />
                                <label class='plus-service__label form-check-label align-items-center' for='service_plus_none_radio'>
                                    <span class='plus-service__name'>{{ text.dont_want_plus_service }}</span>
                                </label>
                            </div>
                            {% for service in plus_services %}
                                <div class='plus-service__item service_plus_radio form-check mb-2 px-0'>
                                    <input class='product-service-plus__radio-input form-check-input' name='service_plus' id='{{ service.id }}' value='{{ service.id }}' type='radio' {% if service.checked %} checked='checked'{% endif %}/>
                                    <label class='plus-service__label form-check-label align-items-center' for='{{ service.id }}'>
                                        <span class='plus-service__name'>{{ service.name }}&nbsp;<span class='round-bracket-around'>{{ service.price }}</span></span>
                                    </label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}

                {% if product_types_disp %}
                    <div id="product-tooltip__type" class="product-type border-top border-bottom py-4 mb-3{% if product_type_style_select %} row gutters-5{% endif %}">
                        {% for param in product_type_params %}
                            {% if product_type_style_select %}
                                <div class="product-type__item col-sm-6" id="page_artdet_product_type_{{ param.id }}">
                                    <div class="product-type__values form-label-group form-select-group">
                                        {% if param.desc_disp %}<div class="artdet__product-type-desc param-details-icon icon--info2 has-tooltip"><span class="tooltip-text tooltip-right">{{ param.desc }}</span></div>{% endif %}</label>
                                        <select class='product_type_select form-control' id='param_type_{{ param.id }}' data-param_id='{{ param.id }}' onchange='ajaxProductTooltip($("option:selected", this).data("sku"),"#page_PopupContainer_tooltip_inner");'>
                                            {% for value_attribute in param.value_attributes %}
                                                <option data-sku="{{ value_attribute.sku }}" value='{{ value_attribute.value_orig }}' {% if value_attribute.selected %} selected="selected"{% endif %}>{{ value_attribute.value }}</option>
                                            {% endfor %}
                                        </select>
                                        <label for="param_type_{{ param.id }}">{{ param.title }}</label>
                                    </div>
                                </div>
                            {% else %}
                                <div class="product-type__item mb-3{% if param.desc_disp %} has-description{% endif %}" id="page_artdet_product_type_{{ param.id }}">
                                    <div class="product-type__title d-inline-flex m-auto align-items-center position-relative">
                                        {{ param.title }}:{% if param.desc_disp %}<span class="artdet__product-type-desc icon--question has-tooltip ml-2"><span class="tooltip-text tooltip-right">{{ param.desc }}</span></span>{% endif %}
                                    </div>
                                    <div class="product-type__values d-inline-flex">
                                        {% for value_attribute in param.value_attributes %}
                                            <div class='product-type__value-wrap m-2 product-type__value--{{ param.type }}{% if value_attribute.selected %} is-active{% endif %}{% if value_attribute.base_type %} is-base{% endif %}' {% if not value_attribute.selected %}onclick='ajaxProductTooltip("{{ value_attribute.sku }}","#page_PopupContainer_tooltip_inner");'{% endif %} {% if param.type == 'color' %}style="background-color:#{{ value_attribute.value_orig }};" data-hexa="{{ value_attribute.value_orig }}"{% endif %} >
                                                <div class='product-type__value-link d-flex w-100 position-relative{% if param.type != "color" %} btn btn-outline-primary py-2 font-s{% endif %}' title='{{ value_attribute.title }}'>
                                                    <span class='product-type__value text-truncate'>{{ value_attribute.value }}</span>
                                                </div>
                                            </div>
                                        {% endfor %}
                                        <input class='product_type_select' type='hidden' id='param_type_{{ param.id }}' data-param_id='{{ param.id }}' value='{{ param.value_act }}' />
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}

                {% if variants_disp %}
                    <div class='product-tooltip__variants product-variants row gutters-5 mb-4'>
                        {% if variant_1_disp %}
                            <div class="col-12 product-variant--1">
                                <div class='product-variant__select-outer js-variant-wrap w-100 form-label-group form-select-group'>
                                    {{ variant_1_hidden }}
                                    <select name="egyeb_list1" id="egyeb_list1_{{ sku_id }}" class="form-control" onchange="changeVariant(this)">
                                        {% for option in variant_1_options %}
                                            <option value='{{ option.value }}' {% if option.selected %}selected="selected"{% endif %} {% if option.disabled %} style='display:none;' disabled="disabled"{% endif %}>{{ option.name }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="egyeb_list1_{{ sku_id }}" class="font-weight-bold">{{ variant_1_title }}</label>
                                </div>
                            </div>
                        {% endif %}
                        {% if variant_2_disp %}
                            <div class="col-12 product-variant--2">
                                <div class='product-variant__select-outer js-variant-wrap w-100 form-label-group form-select-group'>
                                    {{ variant_2_hidden }}
                                    <select name="egyeb_list2" id="egyeb_list2_{{ sku_id }}" class="form-control" onchange="changeVariant(this)">
                                        {% for option in variant_2_options %}
                                            <option value='{{ option.value }}' {% if option.selected %}selected="selected"{% endif %} {% if option.disabled %} style='display:none;' disabled="disabled"{% endif %}>{{ option.name }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="egyeb_list2_{{ sku_id }}" class="font-weight-bold">{{ variant_2_title }}</label>
                                </div>
                            </div>
                        {% endif %}
                        {% if variant_3_disp %}
                            <div class="col-12 product-variant--3">
                                <div class='product-variant__select-outer js-variant-wrap w-100 form-label-group form-select-group'>
                                    {{ variant_3_hidden }}
                                    <select name="egyeb_list3" id="egyeb_list3_{{ sku_id }}" class="form-control" onchange="changeVariant(this)">
                                        {% for option in variant_3_options %}
                                            <option value='{{ option.value }}' {% if option.selected %}selected="selected"{% endif %} {% if option.disabled %} style='display:none;' disabled="disabled"{% endif %}>{{ option.name }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="egyeb_list3_{{ sku_id }}" class="font-weight-bold">{{ variant_3_title }}</label>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                {% endif %}
                {{ variants_hidden }}

                <div class="product-tooltip__badges position-relative mb-1">
                    {% if stock_disp %}
                        <div class="product-tooltip__stock badge badge--stock text-uppercase px-3 font-weight-normal{% if not stock_text_only %} stock-number{% endif %}{% if stock_available %} stock-available{% else %}{% if no_stock_but_buyable_disp %} stock-can-order{% else %} no-stock{% endif %}{% endif %}">
                            <div class="product-tooltip__stock-text product-stock-text{% if variants_disp %} has-tooltip{% endif %}">
                                {% if stock_available %}
                                    <div class="artdet__stock-title product-stock-title icon--b-check">
                                        {% if not stock_interval_text_exists or (variants_disp and variants_stock_enabled) %}
                                            {{ text.status_on_stock }}
                                        {% endif %}

                                        {% if (stock_text_only and not variant_disp and stock_interval_text_exists) or (not stock_text_only and not variants_stock_enabled) %}
                                            {% if not variants_stock_enabled %}
                                                <span class="round-bracket-around text-lowercase">{{ stock }}</span>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    {% if variants_disp and variants_stock_enabled %}
                                        <span class="tooltip-text">
                                            {% for variant in stock_variant %}
                                                {% if stock_text_only %}
                                                    <div class='stock-variant'>
                                                    <span class='stock-variant__title'>{{ variant.title }}:</span>
                                                    <span class='stock-variant__qty'>
                                                     {% if variant.available and variant.reach_min_qty %}
                                                         {% if variant.stock_interval_text_exists %}
                                                             {{ variant.qty }}
                                                         {% endif %}
                                                         {% if not variant.stock_interval_text_exists %}
                                                             {{ text.status_on_stock }}
                                                         {% endif %}
                                                     {% else %}
                                                         {% if no_stock_but_buyable_disp %}
                                                             {{ text.status_orderable }}
                                                         {% else %}
                                                             {{ text.status_no_stock }}
                                                         {% endif %}
                                                     {% endif %}
                                                    </span>
                                                </div>
                                                {% else %}
                                                    {% if (variant.available and variant.reach_min_qty) or no_stock_visible %}{# csak akkor ha vásárolható, vagy "vásárolható akkor is, ha nincs raktáron" #}
                                                        <div class='stock-variant'>
                                                        <span class='stock-variant__title'>{{ variant.title }}:</span>
                                                        <span class='stock-variant__qty'>{{ variant.qty }}&nbsp;<span class='stock-variant__unit'>{% if not variant.stock_interval_text_exists %}{{ unit }}{% endif %}</span></span>
                                                    </div>
                                                    {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        </span>
                                    {% endif %}
                                {% else %}
                                    {% if no_stock_but_buyable_disp %}
                                        <div class="product-tooltip__stock-title product-stock-title icon--b-exclamation-2">{{ text.status_orderable }}</div>
                                    {% else %}
                                        <div class="product-tooltip__stock-title product-stock-title icon--b-close">{{ text.status_no_stock }}</div>
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                    {% endif %}

                    {% if status_1_disp %}
                        {% if status_1_link_disp %}<a href="[unas_shop_url]/shop_artspec.php?artspec=3" aria-label="{{ status_1 }}">{% endif %}
                            <div class="product-tooltip__custom-badge badge badge--custom-1 px-3">{{ status_1 }}</div>
                        {% if status_1_link_disp %}</a>{% endif %}
                    {% endif %}

                    {% if status_2_disp %}
                        {% if status_2_link_disp %}<a href="[unas_shop_url]/shop_artspec.php?artspec=4" aria-label="{{ status_2 }}">{% endif %}
                            <div class="product-tooltip__custom-badge badge badge--custom-2 px-3">{{ status_2 }}</div>
                        {% if status_2_link_disp %}</a>{% endif %}
                    {% endif %}

                    {% if status_3_disp %}
                        {% if status_3_link_disp %}<a href="[unas_shop_url]/shop_artspec.php?artspec=5" aria-label="{{ status_3 }}">{% endif %}
                            <div class="product-tooltip__custom-badge badge badge--custom-3 px-3">{{ status_3 }}</div>
                        {% if status_3_link_disp %}</a>{% endif %}
                    {% endif %}
                </div>

                {% if qty_discount_disp %}
                    <div id="artdet__discount" class='discount mb-3 border border-primary rounded'>
                        <div class="row no-gutters discount__content align-items-center p-3">
                            <div class="col-4 justify-content-center d-flex">
                                <div class="discount__title text-primary text-uppercase font-xs">{{ text.quantity_discount }}</div>
                            </div>
                            <div class="col font-s">
                                {% for row in qty_discount_rows %}
                                    <div class="row no-gutters text-center align-items-center">
                                        <div class="col-3" data-label="{{ quantity }}">
                                            <div class="discount__from-wrap font-s">
                                                <span class="discount__from">{{ row.from }}+</span>
                                                <span class="discount__unit">&nbsp;{{ unit }}</span>
                                            </div>
                                        </div>
                                        <div class="col-3 font-s" data-label="{{ text.discount }}">
                                            {% if row.no_discount %}
                                                <span class="discount__text-no-discount">-</span>
                                            {% else %}
                                                {% if row.percent %}
                                                    <span class="discount__amount percent-based">-{{ row.discount_amount }}</span>%
                                                {% else %}
                                                    <span class="discount__amount amount-based">-{{ row.discount_amount }}</span>
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                        <div class="col text-cn font-weight-bold font-l" data-label="{{ text.product_price }}">
                                            {{ row.discount_price }}
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                {% endif %}

                {% if short_desc_disp %}
                    <div class="product-tooltip__short-descripton py-3">
                        <div class="product-tooltip__short-descripton-content text-justify">{{ short_desc }}</div>
                    </div>
                {% endif %}

                {% if params_spec_disp %}
                    <div class="product-tooltip__spec-params mb-3">
                        {% for param_spec in params_spec %}
                            <div class="tooltip__spec-param py-2 artdet__spec-param product_param_type_{{ param_spec.type }}" id="page_artdet_product_param_spec_{{ param_spec.id }}" >
                                {% if (param_spec.type not in ['cust_input_text', 'cust_input_select', 'cust_input_file']) %}
                                    <div class="row gutters-10 align-items-center text-left">
                                        <div class="col-5">
                                            <div class="tooltip__spec-param-title d-inline-block position-relative">
                                                {{ param_spec.title }}
                                                {% if param_spec.desc_disp %}
                                                    <span href='#' class='page_artdet_param_desc param_desc_popup param_desc_popup_ver4 has-tooltip' onclick='return false' title=''><div class="tooltip-text tooltip-right">{{ param_spec.desc }}</div></span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-7">
                                            <div class="tooltip__spec-param-value">{{ param_spec.value }}</div>
                                        </div>
                                    </div>
                                {% else %}
                                    {% if param_spec.type == 'cust_input_text' %}
                                        <div class="row no-gutters align-items-center text-left">
                                            <div class="col form-label-group">
                                                {% if param_spec.desc_disp %}<div class="param-details-icon has-tooltip icon--info2"><span class="tooltip-text">{{ param_spec.desc }}</span></div>{% endif %}
                                                <input type='text' placeholder='{{ param_spec.title }}' name="cust_input_text" class='cust_input cust_input_text form-control {% if _context["param_" ~ param_spec.id ~ "_required"] %}required {% endif %} {% if _context["param_" ~ param_spec.id ~ "_stored"] %}stored {% endif %}' id='{{ param_spec.id }}'>
                                                <label for="{{ param_spec.id }}">{{ param_spec.title }}</label>
                                            </div>
                                        </div>
                                    {% elseif param_spec.type == 'cust_input_file' %}
                                        <div class="row no-gutters align-items-center text-left">
                                            <div class="col input-group mb-2 px-0">
                                                <div class="col px-0 form-label-group mb-0">
                                                    {% if param_spec.desc_disp %}<div class="param-details-icon has-tooltip icon--info2"><span class="tooltip-text">{{ param_spec.desc }}</span></div>{% endif %}
                                                    <input readonly type='text' name="cust_input_file-filename" placeholder="{{ param_spec.title }}" class='cust_input_file-filename form-control bg-white' id='{{ param_spec.id }}-filename'>
                                                    <label for="{{ param_spec.id }}-filename" onclick="return false;">{{ param_spec.title }}</label>
                                                </div>
                                                <div class="input-group-append">
                                                    <label for="{{ param_spec.id }}" class="{{ param_spec.id }}-label m-0 btn btn-primary" data-label="{{ text.select_file }}">{{ text.select_file }}</label>
                                                </div>
                                            </div>
                                            <input type='file' name="cust_input_file" class='cust_input cust_input_file {% if _context["param_" ~ param_spec.id ~ "_required"] %}required {% endif %} d-none' id='{{ param_spec.id }}' onchange="file_input_filname_change(this);">
                                            <span class="file-uploading-icon position-relative overflow-hidden mb-2 p-3">
                                                <span class="file-uploading-icon__file icon--file"></span>
                                                <span class="file-uploading-icon__arrow-up icon--arrow-up position-absolute animation-slide-up"></span>
                                            </span>
                                            <span class="file-uploaded-icon position-relative overflow-hidden mb-2 p-3 text-success"><span class="icon--check"></span></span>
                                        </div>
                                    {% elseif param_spec.type == 'cust_input_select' %}
                                        <div class="row no-gutters align-items-center text-left">
                                            <div class="col form-label-group form-select-group">
                                                {% if param_spec.desc_disp %}<div class="param-details-icon has-tooltip icon--info2"><span class="tooltip-text">{{ param_spec.desc }}</span></div>{% endif %}
                                                <select name='cust_input_select' class='cust_input cust_input_select form-control {% if _context["param_" ~ param_spec.id ~ "_required"] %}required {% endif %}' id='{{ param_spec.id }}'>
                                                    {% for option in _context["param_" ~ param_spec.id ~ "_options"] %}
                                                        <option value="{{ option.value }}" {% if option.disabled %}disabled="disabled" style="display:none;"{% endif %} {% if option.selected %}selected="selected"{% endif %}>{{ option.text }}</option>
                                                    {% endfor %}
                                                </select>
                                                <label for="{{ param_spec.id }}">{{ param_spec.title }}</label>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endif %}
                             </div>
                         {% endfor %}
                    </div>
                    <script>
                        $(document).ready(function(){
                            check_cust_input_live();
                        });
                    </script>
                {% endif %}
            </div>
            {{ product_form_end }}
        </div>
        <div class="product-tooltip__functions col-md-6 border-top pt-3">
            <div class="product-tooltip__function d-flex justify-content-center mx-auto">
                {% if subscribe_disp %}
                    {% if not login_needed %}
                        <div class='product-tooltip__function-outer artdet__function-outer'>
                            <div class='artdet__subscribe-btn function-btn has-tooltip' onclick='{{ button_subscribe_onclick }}' id='{{ button_subscribe_id }}' role="button" aria-label="{{ button_subscribe_text }}">
                                <div class="artdet__function-icon icon--bell function-icon font-s font-md-l"></div>
                                <div class="artdet__function-text tooltip-text text-wrap">{{ subscribe_text }}</div>
                            </div>
                        </div>
                    {% endif %}
                {% endif %}
                {% if recommend_disp %}
                    <div class='product-tooltip__function-outer artdet__function-outer'>
                        <div class='product-tooltip__function-btn function-btn has-tooltip' onclick='{{ recommend_onclick }}' id='page_artdet_func_recommend'>
                            <div class="product-tooltip__function-icon font-s font-md-l function-icon icon--mail"></div>
                            <div class="product-tooltip__function-text tooltip-text">{{ text.recommend }}</div>
                        </div>
                    </div>
                {% endif %}
                {% if print_disp %}
                    <div class='product-tooltip__function-outer artdet__function-outer d-none d-lg-block'>
                        <div class='product-tooltip__function-btn function-btn has-tooltip' onclick='{{ print_onclick }}' id='page_artdet_func_print'>
                            <div class="product-tooltip__function-icon font-s font-md-l function-icon icon--print"></div>
                            <div class="product-tooltip__function-text tooltip-text">{{ text.button_print }}</div>
                        </div>
                    </div>
                {% endif %}
                {% if question_disp %}
                    <div class='product-tooltip__function-outer artdet__function-outer'>
                        <div class='product-tooltip__function-btn function-btn has-tooltip' onclick='{{ question_onclick }}' id='page_artdet_func_question'>
                            <div class="product-tooltip__function-icon font-s font-md-l function-icon icon--question"></div>
                            <div class="product-tooltip__function-text tooltip-text text-wrap">{{ text.question_about_product }}</div>
                        </div>
                    </div>
                {% endif %}
                <div class="product-tooltip__function-outer">
                    <a class="product-tooltip__function-btn function-btn tooltip__btn has-tooltip" href="{{ product_details_url }}">
                        <div class="product-tooltip__function-icon font-s font-md-l function-icon icon--details"></div>
                        <div class="product-tooltip__function-text tooltip-text">{{ text.button_details }}</div>
                    </a>
                </div>
            </div>
        </div>
        <div class="product-tooltip__cart-favourites-compare col-md-6 row gutters-5 align-items-center justify-content-center border-top pt-3">
            {% if cart_disp %}
                <div class="product-tooltip__cart product-tooltip__function-btn-outer col pr-0">
                    <div class="product-tooltip__cart-inner row no-gutters flex-nowrap align-items-center justify-content-center">
                        {% if can_add_to_cart_disp %}
                            <div class="page_qty_input_outer col-auto mr-2 py-2 border rounded">
                                <div class="product-tooltip__cart-btn-input-wrap d-flex justify-content-center">
                                    <button type='button' class='qtyminus qtyminus_common qty_disable icon--minus btn--square-sm btn btn-link'></button>
                                    <div class="product-tooltip__cart-input-wrap page_qty_input_wrap d-flex justify-content-center align-items-center position-relative {% if cart_unit_disp %}has-tooltip{% endif %}">
                                        <input name="db" id="{{ cart_input_id }}" type="number" step="{{ cart_input_data_step }}" value="{{ cart_input_value_number }}" maxlength="7" class="artdet__cart-input page_qty_input text-cn font-weight-bold text-center" data-min="{{ cart_input_data_min }}" data-max="{{ cart_input_data_max }}" data-step="{{ cart_input_data_step }}">
                                        {% if cart_unit_disp %}
                                            <div class='product-tooltip__cart-unit text-center usn tooltip-text'>{{ unit }}</div>
                                        {% endif %}
                                    </div>
                                    <button type='button' class='qtyplus qtyplus_common icon--plus btn--square-sm btn btn-link'></button>
                                </div>
                            </div>
                            <div class='product-tooltip__cart-btn-wrap col d-flex justify-content-center usn'>
                                <button type="button" class="product-tooltip__cart-btn btn btn-primary btn-block font-weight-bold py-2 font-l js-main-product-cart-btn" onclick="{% if not variants_disp %}cart_add('{{ sku_id }}','',null,2);{% else %}checkVariants(this);inputsErrorHandling(1);{% endif %}" {{ cart_target }} {{ cart_analytics_event }} data-cartadd="cart_add('{{ sku_id }}','',null,2);">{{ text.button_add_to_cart }}</button>
                            </div>
                        {% else %}
                            <div class="product-tooltip__cart-no-stock text-uppercase pr-2">{{ text.status_no_stock }}</div>
                        {% endif %}
                    </div>
                </div>
            {% else %}
                {% if inquire_disp %}
                    <div id="product-tooltip__inquire" class='product-tooltip__inquire-btn-wrap product-tooltip__function-btn-outer text-center pr-0'>
                        <button type="button" class="product-tooltip__inquire-btn btn btn-outline-primary" onclick="{{ inquire_onclick }}">{{ text.button_inquire }}</button>
                    </div>
                {% else %}
                    <div class="product-tooltip__cart-not-buyable text-uppercase pr-2">{{ text.status_not_buyable }}</div>
                {% endif %}
            {% endif %}
            {% if compare_disp %}
                <div class='col-auto product-tooltip__function-btn-outer h-100 pr-0'>
                    <div class='product-tooltip__function-btn h-100 border rounded function-btn has-tooltip page_artdet_func_compare_{{ sku_id }}{% if compare_checked %} page_artdet_func_compare_checked{% endif %}' role="button" onclick='{{ compare_onclick }}' id='page_artdet_func_compare' aria-label="{{ text.comparison }}">
                        <div class="product-tooltip__function-icon compare__icon font-s font-md-l function-icon icon--compare"></div>
                        <div class="product-tooltip__function-text tooltip-text page_artdet_func_compare_text_{{ sku_id }}" data-text-add="{{ text.comparison }}" data-text-delete="{{ text.delete_from_compare }}">{% if compare_checked %}{{ text.delete_from_compare }}{% else %}{{ text.comparison }}{% endif %}</div>
                    </div>
                </div>
            {% endif %}
            {% if favourites_disp %}
                <div class='col-auto product-tooltip__function-btn-outer favourites__btn-outer h-100 page_artdet_func_favourites_outer_{{ sku_id }}{% if favourites_checked %} added{% endif %} pr-0'>
                    <div class='product-tooltip__function-btn h-100 border rounded function-btn has-tooltip page_artdet_func_favourites_{{ sku_id }} {% if favourites_checked %}remove_favourites{% endif %}' role="button" onclick='{{ favourite_onclick }}' id='page_tooltip_func_favourites' aria-label="{{ favourite_text }}">
                        <div class="product-tooltip__function-icon font-s font-md-l favourites__icon function-icon icon--favo"></div>
                        <div class="product-tooltip__function-text tooltip-text page_artdet_func_favourites_text_{{ sku_id }}">{{ favourite_text }}</div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>
<div id="page_PopupContainer_tooltip_ajax" style="display: none"></div>
<script>
    $(document).on('ajaxProductTooltipLoading', function(){
        $('#page_PopupContainer_tooltip_ajax').show();
        $('#page_PopupContainer_tooltip_inner').removeClass('loaded').addClass('loading');
    });
    $(document).on('ajaxProductTooltipLoaded', function(){
        $('#page_PopupContainer_tooltip_ajax').hide();
        $('#page_PopupContainer_tooltip_inner').removeClass('loading').addClass('loaded');
    });
</script>